var FormSaver=function(a,b){b=b||{},this.form=document.getElementById(a)||document.querySelector('[name="'+a+'"]'),this.storType=b.storageType||"local",this.storDuration=b.storageDuration||30,this.storID=b.storageID||a,this.fields="input, select, textarea"};FormSaver.prototype=function(){const a={},b=function(){if(!window.localStorage&&!window.sessionStorage)return!1;if(!this.form)return!1;a.storType="local"===this.storType?window.localStorage:window.sessionStorage;var b=this.form.querySelectorAll(this.fields),e=this.storID,f=0,g=b.length;for(g;f<g;f++)h(b[f])||(d(e,b[f]),l(b[f])||j(b[f])||k(b[f])?(b[f].addEventListener("change",c,!1),b[f].formID=e,b[f].field=b[f]):(b[f].addEventListener("blur",c,!1),b[f].formID=e,b[f].field=b[f]));return this},c=function(b){var c=b.target.formID,d=b.target.field;if(j(d))a.storType.setItem(c+"-"+d.name,d.id);else if(k(d)){var e=document.querySelectorAll('[name="'+d.name+'"]'),f=[],h=0;for(le=e.length;h<le;h++)e[h].checked&&f.push(e[h].id);a.storType.setItem(c+"-"+d.name,f)}else a.storType.setItem(c+"-"+g(d),d.value);return d},d=function(a,b){var c=e(a,b);if(!c)return!1;if(j(b))document.getElementById(c).checked=!0;else if(k(b)){var d=0,f=c.split(","),g=f.length;for(d;d<g;d++)document.getElementById(f[d]).checked=!0}else if(l(b)){var h=b.querySelector('[value="'+c+'"]');h&&(b.querySelector("[selected]")&&b.querySelector("[selected]").removeAttribute("selected"),h.setAttribute("selected","selected"))}else{var i=document.getElementById(b.id)||document.querySelector('[name="'+b.name+'"]');i.value=c}return b},e=function(b,c){var d=a.storType.getItem(b+"-"+g(c));return d},f=function(b,c){return a.storType.removeItem(b+"-"+g(c)),c},g=function(a){return j(a)||k(a)?a.name:a.id||a.name},h=function(a){if("password"===a.type)return!0;const b=a.getAttribute("autocomplete");return!(!b||"cc-csc"!==b&&"new-password"!==b&&"current-password"!==b)||!(!a.dataset.fsSave||"false"!==a.dataset.fsSave)},j=function(a){return"radio"===a.type},k=function(a){return"checkbox"===a.type},l=function(a){return"SELECT"==a.tagName},m=function(){var a=this.form.querySelectorAll(this.fields),b=0;for(len=a.length;b<len;b++)l(a[b])||j(a[b])||k(a[b])?a[b].removeEventListener("change",c,!1):a[b].removeEventListener("blur",c,!1);return this},n=function(){var a=this.form.querySelectorAll(this.fields);for(len=a.length;i<len;i++)f(this.storID,a[i]);return this},o=function(){var a=this.form.querySelectorAll(this.fields),b={},c=this.storID,d=0;for(len=a.length;d<len;d++)b[c+"-"+g(a[d])]=e(c,a[d]);return b};return{init:b,pause:m,stop:m,destroy:n,getDatas:o}}(),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(a){var b,c=(this.document||this.ownerDocument).querySelectorAll(a),d=this;do for(b=c.length;--b>=0&&c.item(b)!==d;);while(b<0&&(d=d.parentElement));return d});